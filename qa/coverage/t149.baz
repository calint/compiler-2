func exit(v : reg_rdi) {
    mov(rax, 60)  # exit system call
    mov(rdi, v)   # return code
    syscall()
}

func assert(expr : bool) if not expr exit(1)

func main() {
    var x = 1
    assert(x == 1)

    x  +=   2
    assert(x == 3)

    x-=1
    assert(x == 2)

    x *= 3
    assert(x == 6)
    
    x /= 2
    assert(x == 3)

    x %= 2
    assert(x == 1)

    x |= 0b110
    assert(x == 7)

    x &= 0b11
    assert(x == 3)

    x ^= 4
    assert(x == 7)
}
