func inline exit(v:reg_rbx){
    mov(rbx,v)
    mov(rax,1)
    int(0x80)
}

field hello="hello\n"
field world="world\n"

func print(len,ptr){
    mov(rax,4)
    mov(rbx,1)
    mov(rcx,ptr)
    mov(rdx,len)
    int(0x80)
}

func foo{
    var len=world.len
    print(len-1,world)
}

func bar(n){
    var i=n
    loop{
        var b=2
        if n=0 break
        print(hello.len-n,hello)
        n=n-1
        i=i-1
        b=b-1
    }
}

func inline main{
    var a=2
    foo()
    bar(a+2)
    exit(0)
}
