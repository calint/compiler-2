field hello="hello\n"
field world="world\n"

func inline print(len:reg_rdx,ptr:reg_rcx){
    mov(rcx,ptr)
    mov(rdx,len)
    mov(rbx,1)
    mov(rax,4)
    int(0x80)
}

func inline exit(v){
    mov(rbx,v)
    mov(rax,1)
    int(0x80)
}

func foo{
    var len=world.len
    print(len,world)
}

func bar(n){
    loop{
        if n=0 break
        print(hello.len,hello)
        n=n-1
    }
}

func inline main{
    var a=2
    foo()
    bar(a+1)
    exit(0)
}
